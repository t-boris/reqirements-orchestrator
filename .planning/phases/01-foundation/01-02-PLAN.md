---
phase: 01-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified: [src/config/settings.py, .env.example]
autonomous: true
---

<objective>
Create configuration system using pydantic-settings for environment-based config.

Purpose: Centralize all configuration with validation and type safety.
Output: Settings class that loads from environment variables with sensible defaults.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Settings class with pydantic-settings</name>
  <files>src/config/settings.py</files>
  <action>Create Settings class using pydantic-settings:

```python
from pydantic_settings import BaseSettings, SettingsConfigDict
from typing import Optional

class Settings(BaseSettings):
    model_config = SettingsConfigDict(
        env_file=".env",
        env_file_encoding="utf-8",
        extra="ignore"  # Ignore extra env vars
    )

    # Environment
    environment: str = "development"
    debug: bool = False

    # Database
    database_url: str = "postgresql://localhost:5432/jira_analyst"

    # Slack
    slack_bot_token: str
    slack_app_token: str  # For Socket Mode
    slack_signing_secret: Optional[str] = None

    # Jira
    jira_url: str
    jira_user: str
    jira_api_token: str
    jira_default_project: Optional[str] = None

    # LLM
    google_api_key: str  # For Gemini
    default_llm_model: str = "gemini-1.5-flash"

    # Logging
    log_level: str = "INFO"

# Singleton pattern for settings access
_settings: Optional[Settings] = None

def get_settings() -> Settings:
    global _settings
    if _settings is None:
        _settings = Settings()
    return _settings
```

Key design choices:
- Use pydantic-settings for env loading (NOT python-dotenv directly)
- Required fields have no default (will error if missing)
- Optional fields have sensible defaults
- Singleton pattern via get_settings() for easy access
- extra="ignore" to allow extra env vars without errors</action>
  <verify>python -c "from src.config.settings import Settings; s = Settings(_env_file='.env.example'); print(s.environment)"</verify>
  <done>Settings class loads from environment with validation</done>
</task>

<task type="auto">
  <name>Task 2: Create .env.example template</name>
  <files>.env.example</files>
  <action>Create .env.example with all required variables documented:

```bash
# Environment
ENVIRONMENT=development
DEBUG=false

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/jira_analyst

# Slack (required)
SLACK_BOT_TOKEN=xoxb-your-bot-token
SLACK_APP_TOKEN=xapp-your-app-token
SLACK_SIGNING_SECRET=your-signing-secret

# Jira (required)
JIRA_URL=https://your-org.atlassian.net
JIRA_USER=your-email@example.com
JIRA_API_TOKEN=your-api-token
JIRA_DEFAULT_PROJECT=PROJ

# LLM (required)
GOOGLE_API_KEY=your-google-api-key
DEFAULT_LLM_MODEL=gemini-1.5-flash

# Logging
LOG_LEVEL=INFO
```

Include comments explaining each variable.</action>
  <verify>cat .env.example shows all required variables</verify>
  <done>.env.example documents all configuration options</done>
</task>

<task type="auto">
  <name>Task 3: Update config __init__.py with exports</name>
  <files>src/config/__init__.py</files>
  <action>Export Settings and get_settings from config package:

```python
"""Configuration module for Jira Analyst Bot."""
from src.config.settings import Settings, get_settings

__all__ = ["Settings", "get_settings"]
```

This allows clean imports: `from src.config import get_settings`</action>
  <verify>python -c "from src.config import Settings, get_settings; print('OK')"</verify>
  <done>Config package exports Settings and get_settings</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Settings class validates required fields
- [ ] Settings class loads from .env file when present
- [ ] .env.example documents all config options
- [ ] `from src.config import get_settings` works
</verification>

<success_criteria>
- All tasks completed
- Settings class properly validates required vs optional fields
- Environment-based configuration working
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
